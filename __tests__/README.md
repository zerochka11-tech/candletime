# Unit —Ç–µ—Å—Ç—ã –¥–ª—è CandleTime

## üìã –û–±–∑–æ—Ä

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Jest** –¥–ª—è unit-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –¢–µ—Å—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `__tests__/`.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
```bash
npm test
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ —Ä–µ–∂–∏–º–µ watch (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö)
```bash
npm run test:watch
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
```bash
npm run test:coverage
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
__tests__/
‚îî‚îÄ‚îÄ lib/
    ‚îî‚îÄ‚îÄ utils.test.ts    # –¢–µ—Å—Ç—ã –¥–ª—è lib/utils.ts
```

## ‚úÖ –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

- **lib/utils.ts**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ (38 —Ç–µ—Å—Ç–æ–≤)
  - `formatDate` - 5 —Ç–µ—Å—Ç–æ–≤
  - `formatRemainingTime` - 12 —Ç–µ—Å—Ç–æ–≤
  - `getCandleTypeMeta` - 7 —Ç–µ—Å—Ç–æ–≤
  - `getComputedStatus` - 6 —Ç–µ—Å—Ç–æ–≤
  - `getStatusLabel` - 2 —Ç–µ—Å—Ç–∞
  - `cn` - 6 —Ç–µ—Å—Ç–æ–≤

## üìù –ù–∞–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞

```typescript
import { formatDate } from '@/lib/utils';

describe('formatDate', () => {
  it('—Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç DD.MM.YY', () => {
    const date = new Date('2025-01-15T10:30:00Z');
    const result = formatDate(date);
    expect(result).toBe('15.01.25');
  });
});
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞

1. **Arrange** (–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞) - —Å–æ–∑–¥–∞–µ–º –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
2. **Act** (–î–µ–π—Å—Ç–≤–∏–µ) - –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é
3. **Assert** (–ü—Ä–æ–≤–µ—Ä–∫–∞) - –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### –ü–æ–ª–µ–∑–Ω—ã–µ –º–∞—Ç—á–µ—Ä—ã Jest

- `expect(value).toBe(expected)` - —Å—Ç—Ä–æ–≥–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (===)
- `expect(value).toEqual(expected)` - –≥–ª—É–±–æ–∫–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
- `expect(value).toContain(substring)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
- `expect(value).toMatch(regex)` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º
- `expect(value).toBeTruthy()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ truthy –∑–Ω–∞—á–µ–Ω–∏–µ
- `expect(value).toBeFalsy()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ falsy –∑–Ω–∞—á–µ–Ω–∏–µ

### –ú–æ–∫–∏ –¥–ª—è –≤—Ä–µ–º–µ–Ω–∏

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –≤—Ä–µ–º–µ–Ω–∏, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `jest.useFakeTimers()`:

```typescript
beforeEach(() => {
  jest.useFakeTimers();
  jest.setSystemTime(new Date('2025-01-15T12:00:00Z'));
});

afterEach(() => {
  jest.useRealTimers();
});
```

## üéØ –¶–µ–ª–∏ –ø–æ–∫—Ä—ã—Ç–∏—è

- **–ú–∏–Ω–∏–º—É–º**: 70% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö —É—Ç–∏–ª–∏—Ç
- **–¶–µ–ª—å**: 90%+ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π
- **–ò–¥–µ–∞–ª**: 100% –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –≤—Å–µ—Ö —É—Ç–∏–ª–∏—Ç

## üìä –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–∫—Ä—ã—Ç–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `npm run test:coverage` —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ `coverage/`.

–û—Ç–∫—Ä–æ–π—Ç–µ `coverage/lcov-report/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∫—Ä—ã—Ç–∏—è.

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- `jest.config.js` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest
- `jest.setup.js` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Jest Documentation](https://jestjs.io/docs/getting-started)
- [Testing Library](https://testing-library.com/)
- [Jest Matchers](https://jestjs.io/docs/expect)

