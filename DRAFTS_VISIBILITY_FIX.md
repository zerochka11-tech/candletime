# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

–°—Ç–∞—Ç—å–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `articles` –≤ Supabase, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –≤ —Ä–∞–∑–¥–µ–ª–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏. –ê–¥–º–∏–Ω—ã –Ω–µ –º–æ–≥–ª–∏:
- –í–∏–¥–µ—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤ —Å–ø–∏—Å–∫–µ —Å—Ç–∞—Ç–µ–π
- –û—Ç–∫—Ä—ã–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å–∏ –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π

## üîç –ü—Ä–∏—á–∏–Ω–∞

–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ –æ–±—ã—á–Ω—ã–π Supabase –∫–ª–∏–µ–Ω—Ç (`supabase`), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è Row Level Security (RLS) –ø–æ–ª–∏—Ç–∏–∫–∞–º. RLS –ø–æ–ª–∏—Ç–∏–∫–∞ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `articles` —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ç—å–∏ (`published = true`), –ø–æ—ç—Ç–æ–º—É —á–µ—Ä–Ω–æ–≤–∏–∫–∏ (`published = false`) –±—ã–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ –æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∫ —Å—Ç–∞—Ç—å—è–º –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –∏–¥—É—Ç —á–µ—Ä–µ–∑ API routes, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç **admin –∫–ª–∏–µ–Ω—Ç** (service role key), –æ–±—Ö–æ–¥—è—â–∏–π RLS –ø–æ–ª–∏—Ç–∏–∫–∏.

### –ò–∑–º–µ–Ω–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–ª–µ–Ω GET –º–µ—Ç–æ–¥ –≤ `/api/admin/articles/route.ts`**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (all/published/draft)
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç admin –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é

2. **–î–æ–±–∞–≤–ª–µ–Ω GET –º–µ—Ç–æ–¥ –≤ `/api/admin/articles/[id]/route.ts`**
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–Ω—É —Å—Ç–∞—Ç—å—é –ø–æ ID
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç admin –∫–ª–∏–µ–Ω—Ç –¥–ª—è –æ–±—Ö–æ–¥–∞ RLS
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ `app/admin/articles/page.tsx`**
   - `loadArticles()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API route –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
   - `loadStats()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API route –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
   - –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ admin –∫–ª–∏–µ–Ω—Ç

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ `app/admin/articles/[id]/page.tsx`**
   - `loadArticle()` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç API route
   - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```typescript
// ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –æ–±—ã—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç (–ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è RLS)
const { data, error } = await supabase
  .from('articles')
  .select('*')
  .eq('published', false); // RLS –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —á–µ—Ä–Ω–æ–≤–∏–∫–∞–º
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```typescript
// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API route —Å admin –∫–ª–∏–µ–Ω—Ç–æ–º (–æ–±—Ö–æ–¥–∏—Ç RLS)
const response = await fetch('/api/admin/articles?filter=draft', {
  headers: { Authorization: `Bearer ${token}` },
});
// API route –∏—Å–ø–æ–ª—å–∑—É–µ—Ç service role key –∏ –≤–∏–¥–∏—Ç –≤—Å–µ —Å—Ç–∞—Ç—å–∏
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –ê–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç –≤—Å–µ —Å—Ç–∞—Ç—å–∏, –≤–∫–ª—é—á–∞—è —á–µ—Ä–Ω–æ–≤–∏–∫–∏
- ‚úÖ –§–∏–ª—å—Ç—Ä "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ç—å—é –ø–µ—Ä–µ–¥ –ø—É–±–ª–∏–∫–∞—Ü–∏–µ–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- API routes –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —á–µ—Ä–µ–∑ `checkAdminAuth()`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è service role key —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –û–±—ã—á–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ API routes
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

### GET `/api/admin/articles`
**Query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `filter` - 'all' | 'published' | 'draft'
- `page` - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
- `perPage` - —Å—Ç–∞—Ç–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "articles": [...],
  "count": 10,
  "page": 1,
  "perPage": 50
}
```

### GET `/api/admin/articles/[id]`
**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "article": { ... }
}
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `/admin/articles`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–∏–ª—å—Ç—Ä "–ß–µ—Ä–Ω–æ–≤–∏–∫–∏"
3. –í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∑—è—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ
4. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ—Å–º–æ—Ç—Ä" –Ω–∞ –ª—é–±–æ–π —Å—Ç–∞—Ç—å–µ
5. –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
6. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç—å—é –∏ –Ω–∞–∂–º–∏—Ç–µ "–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å"

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `SUPABASE_SERVICE_ROLE_KEY` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ Vercel
- API routes —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (Bearer token)
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–∏ API routes

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-01-10  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

