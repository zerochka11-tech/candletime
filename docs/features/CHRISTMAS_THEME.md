# Рождественская тема

## Описание

Рождественская тема добавляет на сайт мягкую, воздушную и минималистичную новогоднюю атмосферу через анимацию снежинок и специальный блок для загадывания желаний на новый год. Тема может быть включена или выключена администратором через админ-панель.

## Функции

### 1. Анимация снежинок
- Плавное падение снежинок по всему экрану
- Горизонтальное покачивание (эффект ветра)
- Вращение снежинок во время падения
- Настраиваемые параметры (количество, скорость, размер, цвет, прозрачность)
- Мягкая, минималистичная анимация с низкой непрозрачностью
- Использует Canvas API для плавной производительности

**Параметры по умолчанию:**
- Количество: 35 снежинок
- Скорость: 0.8
- Размер: от 0.8 до 2.5 пикселей
- Цвет: `rgba(255, 255, 255, 0.6)`
- Ветер: включен
- Вращение: включено

### 2. Блок "Прощаемся с 2025 годом"
- Компактный блок на главной странице под hero-секцией
- Отображается только при включенной рождественской теме
- Рассказывает о завершении 2025 года в контексте проекта
- Мягкие пастельные цвета и минималистичный дизайн
- Кнопка для перехода на страницу загадывания желания на 2026 год

### 3. Плавающая кнопка загадывания желания
- Фиксированная кнопка в правом нижнем углу экрана
- Отображается только при включенной рождественской теме
- Следует за скроллом страницы
- Прозрачный белый/темный фон с backdrop-blur
- Иконка ✨ с анимацией twinkle
- Появляется с задержкой 1 секунда
- При клике открывает модальное окно с описанием

### 4. Модальное окно загадывания желания
- Открывается при клике на плавающую кнопку
- Семантическая структура с правильными ARIA-атрибутами
- Правильная иерархия заголовков для SEO
- Чистый дизайн без декоративных элементов
- Описание функционала загадывания желания
- Кнопка перехода на страницу `/wish-2026`
- Закрытие по Escape и клику на backdrop

### 5. Страница загадывания желания
- `/wish-2026` - страница для создания свечи с желанием на 2026 год
- Пользователь может:
  - Записать краткое название желания (необязательно)
  - Подробно описать своё желание на 2026 год
  - Выбрать длительность свечи (1 день, 1 неделя, 1 месяц)
  - Сделать заголовок анонимным (только заголовок скрывается, само желание остаётся видимым)
  - Зажечь свечу с желанием
- Стиль страницы соответствует общему дизайну проекта
- Информационный блок "Как это работает?" без смайликов

## Управление темой

### Для администраторов

1. Перейдите в админ-панель: `/admin/settings`
2. Найдите раздел "Рождественская тема"
3. Переключите переключатель для включения/выключения темы
4. Изменения применяются сразу после сохранения

### Технические детали

- Настройка хранится в таблице `site_settings` в базе данных
- Ключ настройки: `christmas_theme_enabled`
- Значение: `true` или `false` (boolean)
- Проверка темы происходит через хук `useChristmasTheme()`
- Автообновление каждые 30 секунд

## Установка

1. Выполните SQL миграцию:
   ```sql
   -- Запустите файл supabase-christmas-theme-setup.sql в Supabase SQL Editor
   ```

2. Настройка применяется автоматически после выполнения миграции

## Компоненты

- `components/Snowflakes.tsx` - компонент анимации снежинок (Canvas-based)
- `components/Wish2026FloatingButton.tsx` - плавающая кнопка для загадывания желания
  - Фиксированная позиция в правом нижнем углу
  - Прозрачный фон с backdrop-blur
  - Иконка ✨ с анимацией twinkle
  - Появляется с задержкой 1 секунда при включенной теме
  - Открывает модальное окно при клике
- `components/Wish2026Modal.tsx` - модальное окно для загадывания желания
  - Семантическая структура с правильными ARIA-атрибутами
  - Правильная иерархия заголовков (h2, h3) для SEO
  - Семантические HTML-теги: `<header>`, `<section>`, `<footer>`
  - Закрытие по Escape и клику на backdrop
  - Блокировка скролла при открытом модальном окне
  - Чистый дизайн без декоративных элементов
- `hooks/useChristmasTheme.ts` - хук для проверки состояния темы с автообновлением каждые 30 секунд
- `lib/christmasTheme.ts` - функции для работы с настройками темы в базе данных
- `app/wish-2026/page.tsx` - страница загадывания желания на 2026 год
- `app/admin/settings/page.tsx` - админ-панель для управления настройками сайта
- `app/page.tsx` - главная страница с условным отображением снежинок, блока "Прощаемся с 2025 годом" и плавающей кнопки

## API

### GET /api/admin/settings
Получить все настройки сайта (только для администраторов)

### PUT /api/admin/settings
Обновить настройку (только для администраторов)

```json
{
  "key": "christmas_theme_enabled",
  "value": true
}
```

## Примечания

- Рождественская тема не влияет на функциональность сайта, только на внешний вид
- Все существующие свечи и данные остаются без изменений
- Тема может быть включена/выключена в любое время через админ-панель
- Пользователи увидят изменения в течение 30 секунд (автообновление через хук)
- Анимация снежинок использует Canvas API для оптимальной производительности
- Дизайн темы минималистичный и мягкий, не перегружает интерфейс
- Компонент `ChristmasDecorations.tsx` был удален в пользу более минималистичного подхода

